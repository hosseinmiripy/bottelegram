from aiogram import Bot, Dispatcher, types
from aiogram.types import InlineKeyboardMarkup, InlineKeyboardButton
from aiogram.utils import executor
import logging
import asyncio

TOKEN = "YOUR_BOT_TOKEN"  # ØªÙˆÚ©Ù† Ø±Ø¨Ø§Øª Ø®ÙˆØ¯ Ø±Ø§ Ø§ÛŒÙ†Ø¬Ø§ Ù‚Ø±Ø§Ø± Ø¯Ù‡ÛŒØ¯
CHANNEL_ID = "@YourChannel"  # Ø¢ÛŒØ¯ÛŒ Ú©Ø§Ù†Ø§Ù„ Ù…ÙˆØ±Ø¯Ù†Ø¸Ø± Ø¨Ø±Ø§ÛŒ Ø¨Ø±Ø±Ø³ÛŒ Ø¹Ø¶ÙˆÛŒØª

bot = Bot(token=TOKEN)
dp = Dispatcher(bot)
logging.basicConfig(level=logging.INFO)

# Ø¯Ú©Ù…Ù‡ Ú†Ú© Ú©Ø±Ø¯Ù† Ø¹Ø¶ÙˆÛŒØª
def check_membership_keyboard():
    keyboard = InlineKeyboardMarkup()
    keyboard.add(InlineKeyboardButton("Ø¨Ø±Ø±Ø³ÛŒ Ø¹Ø¶ÙˆÛŒØª âœ…", callback_data="check_membership"))
    return keyboard

@dp.message_handler(commands=['start'])
async def send_welcome(message: types.Message):
    video_link = "https://your_video_link.mp4"  # Ù„ÛŒÙ†Ú© ÙˆÛŒØ¯Ø¦Ùˆ
    caption_text = "ğŸ¥ Ø¨Ø±Ø§ÛŒ Ø¯Ø±ÛŒØ§ÙØª ÙØ§ÛŒÙ„ Ø§ÛŒÙ† ÙÛŒÙ„Ù… Ø¨Ø§ÛŒØ¯ Ø¹Ø¶Ùˆ Ú©Ø§Ù†Ø§Ù„ Ø´ÙˆÛŒØ¯."
    await message.answer_video(video=video_link, caption=caption_text, reply_markup=check_membership_keyboard())

@dp.callback_query_handler(lambda c: c.data == "check_membership")
async def check_membership(callback_query: types.CallbackQuery):
    user_id = callback_query.from_user.id
    chat_member = await bot.get_chat_member(CHANNEL_ID, user_id)
    
    if chat_member.status in ["member", "administrator", "creator"]:
        file_id = "YOUR_FILE_ID"  # Ø¢ÛŒâ€ŒØ¯ÛŒ ÙØ§ÛŒÙ„ ÙˆÛŒØ¯ÛŒÙˆÛŒÛŒ Ú©Ù‡ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ø§Ø±Ø³Ø§Ù„ Ú©Ù†ÛŒØ¯
        await bot.send_document(user_id, file_id, caption="âœ… Ø´Ù…Ø§ Ø¹Ø¶Ùˆ Ú©Ø§Ù†Ø§Ù„ Ù‡Ø³ØªÛŒØ¯! Ø§ÛŒÙ† Ù‡Ù… ÙØ§ÛŒÙ„ ÙÛŒÙ„Ù….")
    else:
        await bot.answer_callback_query(callback_query.id, "âŒ Ù‡Ù†ÙˆØ² Ø¹Ø¶Ùˆ Ú©Ø§Ù†Ø§Ù„ Ù†ÛŒØ³ØªÛŒØ¯! Ù„Ø·ÙØ§Ù‹ Ø§Ø¨ØªØ¯Ø§ Ø¹Ø¶Ùˆ Ø´ÙˆÛŒØ¯.", show_alert=True)

if __name__ == "__main__":
    loop = asyncio.get_event_loop()
    loop.create_task(dp.start_polling())
    loop.run_forever()
